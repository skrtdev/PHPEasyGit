<?php
function random_sha256(){
    return substr(hash("sha256", random_bytes(25)), 0, 20);
}

$sha = random_sha256();
mkdir(dirname(__FILE__)."/".$sha);

$array = [
    "EasyGit.php" => "PD9waHAKY2xhc3MgX0Vhc3lHaXR7CgoKICAgIHByaXZhdGUgJGFwaV91cmwgPSAiaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS8iOwogICAgcHJpdmF0ZSAkanNvbjsKCgogICAgcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCl7CiAgICAgICAgJHRoaXMtPmpzb24gPSBqc29uX2RlY29kZShpbXBsb2RlKGZpbGUoZGlybmFtZShfX0ZJTEVfXykuIi9tYWluLmpzb24iKSksIHRydWUpOwogICAgICAgICR0aGlzLT5wYWNrYWdlc19zcmMgPSBkaXJuYW1lKF9fRklMRV9fKS4iL3BhY2thZ2VzLyI7CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIEFQSUNhbGwoc3RyaW5nICRwYXRoKXsKCiAgICAgICAgJHBhdGggPSBzdHJfcmVwbGFjZSgkdGhpcy0+YXBpX3VybCwgIiIsICRwYXRoKTsKCiAgICAgICAgLy9lY2hvICRwYXRoLiAiXG5cbiI7CgogICAgICAgICRoZWFkZXJzID0gWyJBY2NlcHQ6IGFwcGxpY2F0aW9uL3ZuZC5naXRodWIudjMranNvbiJdOwogICAgICAgIGlmKGlzc2V0KCR0aGlzLT5qc29uWydPQXV0aC1Ub2tlbiddKSkgJGhlYWRlcnNbXSA9ICJBdXRob3JpemF0aW9uOiB0b2tlbiAiLiR0aGlzLT5qc29uWydPQXV0aC1Ub2tlbiddOwoKICAgICAgICAkY2ggPSBjdXJsX2luaXQoKTsKICAgICAgICBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfVVJMLCAkdGhpcy0+YXBpX3VybC4kcGF0aCk7CiAgICAgICAgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1VTRVJBR0VOVCwgJ1BIUEVhc3lHaXQnKTsKICAgICAgICBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfUkVUVVJOVFJBTlNGRVIsIHRydWUpOwogICAgICAgIGN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9IVFRQSEVBREVSLCAkaGVhZGVycyk7CiAgICAgICAgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX0ZPTExPV0xPQ0FUSU9OLCB0cnVlKTsgLy8gYWFhYWFhYWFhCiAgICAgICAgLy9jdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfSEVBREVSLCB0cnVlKTsKCiAgICAgICAgJG91dHB1dCA9IGN1cmxfZXhlYygkY2gpOwogICAgICAgIC8vZWNobyAkb3V0cHV0LCAiXG5cbiI7CiAgICAgICAgY3VybF9jbG9zZSgkY2gpOwogICAgICAgICRkZWNvZGVkID0ganNvbl9kZWNvZGUoJG91dHB1dCwgVFJVRSk7CgogICAgICAgIHJldHVybiAkZGVjb2RlZDsKICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gX19jYWxsKHN0cmluZyAkbmFtZSwgYXJyYXkgJGFyZ3VtZW50cyl7CiAgICAgICAgcmV0dXJuICR0aGlzLT5BUElDYWxsKCRuYW1lLiIvIi4kYXJndW1lbnRzWzBdKTsKICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gaW5zdGFsbFBhY2thZ2Uoc3RyaW5nICRyZXBvc2l0b3J5X25hbWUpewogICAgICAgICRyZXBvc2l0b3J5ID0gJHRoaXMtPnJlcG9zKCRyZXBvc2l0b3J5X25hbWUpOwogICAgICAgICRyZXBvc2l0b3J5X2NvbnRlbnQgPSAkdGhpcy0+cmVwb3MoJHJlcG9zaXRvcnlfbmFtZS4iL2NvbnRlbnRzIik7CgogICAgICAgICRwYWNrYWdlc19zcmMgPSAkdGhpcy0+cGFja2FnZXNfc3JjOwogICAgICAgICRwYWNrYWdlc3JjID0gJHBhY2thZ2VzX3NyYy4kcmVwb3NpdG9yeV9uYW1lLiIvc3JjIjsKCiAgICAgICAgLy9lY2hvIGpzb25fZW5jb2RlKCRyZXBvc2l0b3J5X2NvbnRlbnQpOwogICAgICAgIGlmKCR0aGlzLT5maWxlSW5EaXIoJHJlcG9zaXRvcnlfY29udGVudCwgIlBIUEVhc3lHaXQuanNvbiIpICE9PSBmYWxzZSl7CiAgICAgICAgICAgIC8vZWNobyAiaXMgYSBnaXQiLCAiXG4iOwogICAgICAgICAgICAkZWFzeWdpdCA9IGpzb25fZGVjb2RlKCR0aGlzLT5jdXJsKCJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vJHJlcG9zaXRvcnlfbmFtZS8iLiRyZXBvc2l0b3J5WydkZWZhdWx0X2JyYW5jaCddLiIvUEhQRWFzeUdpdC5qc29uIiksIHRydWUpOwogICAgICAgICAgICAvL3Zhcl9kdW1wKCJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vJHJlcG9zaXRvcnlfbmFtZS8iLiRyZXBvc2l0b3J5WydkZWZhdWx0X2JyYW5jaCddLiIvUEhQRWFzeUdpdC5qc29uIik7CiAgICAgICAgfQogICAgICAgIGVsc2VpZigkdGhpcy0+ZmlsZUluRGlyKCRyZXBvc2l0b3J5X2NvbnRlbnQsICJjb21wb3Nlci5qc29uIikgIT09IGZhbHNlKXsKICAgICAgICAgICAgLy9lY2hvICJmdWNrIGlzIGEgY29tcG9zZXIiLCAiXG4iOwogICAgICAgICAgICAkZWFzeWdpdCA9ICR0aGlzLT5jb21wb3NlclRvRWFzeUdpdChqc29uX2RlY29kZSgkdGhpcy0+Y3VybCgiaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tLyRyZXBvc2l0b3J5X25hbWUvIi4kcmVwb3NpdG9yeVsnZGVmYXVsdF9icmFuY2gnXS4iL2NvbXBvc2VyLmpzb24iKSwgdHJ1ZSkpOwogICAgICAgIH0KCiAgICAgICAgaWYoaXNzZXQoJGVhc3lnaXQpKXsKICAgICAgICAgICAgLy9lY2hvICJpbiB0aGUgZ2l0IiwgIlxuIjsKICAgICAgICAgICAgLy9kaWUodmFyX2R1bXAoJGVhc3lnaXQpKTsKICAgICAgICAgICAgZmlsZV9wdXRfY29udGVudHMoJHBhY2thZ2VzX3NyYy4kcmVwb3NpdG9yeV9uYW1lLiIvcGFja2FnZS5qc29uIiwganNvbl9lbmNvZGUoJGVhc3lnaXQsIEpTT05fUFJFVFRZX1BSSU5UKSk7CgogICAgICAgICAgICBmb3JlYWNoIChhcnJheV9tZXJnZSgkZWFzeWdpdFsnYXV0b2xvYWQnXSwgaXNzZXQoJGVhc3lnaXRbJ2ltcG9ydCddKSA/ICRlYXN5Z2l0WydpbXBvcnQnXSA6IFtdKSBhcyAkYXV0b2xvYWQpIHsKICAgICAgICAgICAgICAgIC8vdmFyX2R1bXAoImh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS8kcmVwb3NpdG9yeV9uYW1lLyIuJHJlcG9zaXRvcnlbJ2RlZmF1bHRfYnJhbmNoJ10uIi8kYXV0b2xvYWQiKTsKICAgICAgICAgICAgICAgICR0aGlzLT5zYWZlbWtkaXIoJHBhY2thZ2VzcmMuIi8kYXV0b2xvYWQiKTsKICAgICAgICAgICAgICAgIC8vIGNvZGUuLi4KICAgICAgICAgICAgICAgIGNvcHkoImh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS8kcmVwb3NpdG9yeV9uYW1lLyIuJHJlcG9zaXRvcnlbJ2RlZmF1bHRfYnJhbmNoJ10uIi8kYXV0b2xvYWQiLCAkcGFja2FnZXNyYy4iLyRhdXRvbG9hZCIpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmaWxlX3B1dF9jb250ZW50cygkcGFja2FnZXNfc3JjLiRyZXBvc2l0b3J5X25hbWUuIi9hdXRvbG9hZC5waHAiLCBiYXNlNjRfZGVjb2RlKCJQRDl3YUhBTkNnMEtKR3B6YjI0Z1BTQnFjMjl1WDJSbFkyOWtaU2hwYlhCc2IyUmxLR1pwYkdVb1pHbHlibUZ0WlNoZlgwWkpURVZmWHlrdUlpOXdZV05yWVdkbExtcHpiMjRpS1NrcE93MEtabTl5WldGamFDQW9KR3B6YjI0dFBtRjFkRzlzYjJGa0lHRnpJQ1JtYVd4bGNHRjBhQ2tnZXcwS0lDQWdJSEpsY1hWcGNtVWdaR2x5Ym1GdFpTaGZYMFpKVEVWZlh5a3VJaTl6Y21NdkpHWnBiR1Z3WVhSb0lqc05DbjBOQ2cwS1B6NE5DZz09IikpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gYXV0b2xvYWRQYWNrYWdlKCRwYWNrYWdlKXsKCiAgICAgICAgJHBhY2thZ2VzX3NyYyA9ICR0aGlzLT5wYWNrYWdlc19zcmM7CiAgICAgICAgaWYoIWlzX2RpcigkcGFja2FnZXNfc3JjKSl7CiAgICAgICAgICAgIG1rZGlyKCRwYWNrYWdlc19zcmMpOwogICAgICAgIH0KICAgICAgICAkb2xkX2RpciA9ICIiOwogICAgICAgIGZvcmVhY2goZXhwbG9kZSgiLyIsICRwYWNrYWdlKSBhcyAkZGlyKXsKICAgICAgICAgICAgJHRoaXNkaXIgPSAkcGFja2FnZXNfc3JjLiRvbGRfZGlyLiRkaXI7CiAgICAgICAgICAgICR0aGlzLT5zYWZlbWtkaXIoJHRoaXNkaXIpOwogICAgICAgICAgICAkb2xkX2RpciAuPSAkZGlyLiIvIjsKICAgICAgICB9CiAgICAgICAgLy8gY3JlYXRlIHNyYyBpbiBwYWNrYWdlIGZvbGRlcgogICAgICAgICRwYWNrYWdlc3JjID0gJHBhY2thZ2VzX3NyYy4kcGFja2FnZS4iL3NyYyI7CiAgICAgICAgaWYoIWlzX2RpcigkcGFja2FnZXNyYykpewogICAgICAgICAgICBta2RpcigkcGFja2FnZXNyYywgMDc3NywgdHJ1ZSk7CiAgICAgICAgfQoKICAgICAgICBpZihjb3VudChzY2FuZGlyKCRwYWNrYWdlc3JjKSkgPT09IDIgKXsgLy8gbm9uIGMnw6ggbmdheiBuZWxsYSBjYXJ0ZWxsYQogICAgICAgICAgICAkdGhpcy0+aW5zdGFsbFBhY2thZ2UoJHBhY2thZ2UpOwogICAgICAgIH0KCiAgICAgICAgcmVxdWlyZSAkcGFja2FnZXNfc3JjLiRwYWNrYWdlLiIvYXV0b2xvYWQucGhwIjsKCiAgICB9CgogICAgcHJpdmF0ZSBmdW5jdGlvbiBmaWxlSW5EaXIoYXJyYXkgJGRpciwgc3RyaW5nICRmaWxlbmFtZSl7CiAgICAgICAgZm9yZWFjaCgkZGlyIGFzICRmaWxlKXsKICAgICAgICAgICAgaWYoJGZpbGVbJ25hbWUnXSA9PT0gJGZpbGVuYW1lKSByZXR1cm4gJGZpbGU7CiAgICAgICAgfQogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBwcml2YXRlIGZ1bmN0aW9uIGNvbXBvc2VyVG9FYXN5R2l0KGFycmF5ICRjb21wb3Nlcil7CiAgICAgICAgLy8gY29kZS4uLgogICAgICAgICRyZXMgPSBbImF1dG9sb2FkIiA9PiBbXV07CiAgICAgICAgZm9yZWFjaCAoJGNvbXBvc2VyWydhdXRvbG9hZCddIGFzICRhdXRvbG9hZF90eXBlID0+ICRhdXRvbG9hZF9jb250ZW50KSB7CiAgICAgICAgICAgIGlmKCRhdXRvbG9hZF90eXBlID09PSAicHNyLTQiKXsKICAgICAgICAgICAgICAgIGZvcmVhY2ggKCRhdXRvbG9hZF9jb250ZW50IGFzICRrZXkgPT4gJHZhbHVlKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gY29kZS4uLiBjaGUgY2F6em8gc29ubyBrZXkgZSB2YWx1ZT8gYm9oCiAgICAgICAgICAgICAgICAgICAgLy9kaWUodmFyX2R1bXAoJHRoaXMtPmV4cG9ydERpcigkdGhpcy0+cmVwb3MoJGNvbXBvc2VyWyduYW1lJ10uIi9jb250ZW50cy8kdmFsdWUiKSkpKTsKICAgICAgICAgICAgICAgICAgICAkcmVzWydhdXRvbG9hZCddID0gYXJyYXlfbWVyZ2UoJHJlc1snYXV0b2xvYWQnXSwgJHRoaXMtPmV4cG9ydERpcigkdGhpcy0+cmVwb3MoJGNvbXBvc2VyWyduYW1lJ10uIi9jb250ZW50cy8kdmFsdWUiKSkpOyAvLyBmb3JzZSBkZXZvIGZhcmUgdW4gdHJpbSBkaSAnLycgc3UgJHZhbHVlCiAgICAgICAgICAgICAgICAgICAgLy9kaWUodmFyX2R1bXAoJHJlcykpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgICRyZXNbJ2F1dG9sb2FkJ10gPSAkdGhpcy0+c29ydEF1dG9sb2FkKGFycmF5X3VuaXF1ZSgkcmVzWydhdXRvbG9hZCddKSk7CiAgICAgICAgLy92YXJfZHVtcCgkcmVzKTsKICAgICAgICByZXR1cm4gJHJlczsKICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0KCiAgICBwcml2YXRlIGZ1bmN0aW9uIGV4cG9ydERpcihhcnJheSAkZGlyX2NvbnRlbnQgKXsKICAgICAgICAkcmVzID0gW107CiAgICAgICAgZm9yZWFjaCAoJGRpcl9jb250ZW50IGFzICRlbGVtZW50KSB7CiAgICAgICAgICAgIC8vIGNvZGUuLi4KICAgICAgICAgICAgLy92YXJfZHVtcCgkZWxlbWVudCk7CiAgICAgICAgICAgIGlmKCRlbGVtZW50Wyd0eXBlJ10gPT09ICJmaWxlIikgJHJlc1tdID0gJGVsZW1lbnRbJ3BhdGgnXTsKICAgICAgICAgICAgaWYoJGVsZW1lbnRbJ3R5cGUnXSA9PT0gImRpciIpICRyZXMgPSBhcnJheV9tZXJnZSgkcmVzLCAkdGhpcy0+ZXhwb3J0RGlyKCR0aGlzLT5BUElDYWxsKCRlbGVtZW50Wyd1cmwnXSkpKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBhcnJheV91bmlxdWUoJHJlcyk7CiAgICB9CgogICAgcHJpdmF0ZSBmdW5jdGlvbiBjdXJsKHN0cmluZyAkdXJsKXsKICAgICAgICAkY2ggPSBjdXJsX2luaXQoKTsKICAgICAgICBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfVVJMLCAkdXJsKTsKICAgICAgICBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfUkVUVVJOVFJBTlNGRVIsIHRydWUpOwogICAgICAgICRvdXRwdXQgPSBjdXJsX2V4ZWMoJGNoKTsKICAgICAgICBjdXJsX2Nsb3NlKCRjaCk7CiAgICAgICAgcmV0dXJuICRvdXRwdXQ7CiAgICB9CgogICAgcHJpdmF0ZSBmdW5jdGlvbiBzb3J0QXV0b2xvYWQoYXJyYXkgJGFycmF5KXsKICAgICAgICBmdW5jdGlvbiBzb3J0ZXIgKCRhLCAkYiwgJHIgPSBudWxsKSB7CgogICAgICAgICAgICAkcmV0dXJuID0gc3Vic3RyX2NvdW50KCRhLCAnLycpID4gc3Vic3RyX2NvdW50KCRiLCAnLycpID8gMSA6IC0xOwoKICAgICAgICAgICAgaWYoc3Vic3RyX2NvdW50KCRhLCAnLycpID09PSBzdWJzdHJfY291bnQoJGIsICcvJykpewogICAgICAgICAgICAgICAgLy92YXJfZHVtcChwcmVnX21hdGNoKCcvW14iL10rJC8nLCAkYSwgJGFtKSk7CiAgICAgICAgICAgICAgICBwcmVnX21hdGNoKCcvKFx3K1wvKSsvJywgJGEsICRwYSk7CiAgICAgICAgICAgICAgICBwcmVnX21hdGNoKCcvKFx3K1wvKSsvJywgJGIsICRwYik7CgoKICAgICAgICAgICAgICAgIGlmKCRwYVswXSAhPT0gJHBiWzBdKXsKICAgICAgICAgICAgICAgICAgICAvL2lmKGlzc2V0KCRyKSkgZWNobyAibm90IHNhbWUiLCAiXG4iOwogICAgICAgICAgICAgICAgICAgIGlmKHN0cmxlbigkcGFbMF0pID09PSBzdHJsZW4oJHBiWzBdKSkgJHJldHVybj0gMDsKICAgICAgICAgICAgICAgICAgICAkcmV0dXJuPSBzdHJsZW4oJHBhWzBdKSA8IHN0cmxlbigkcGJbMF0pID8gMSA6IC0xOwogICAgICAgICAgICAgICAgICAgIHJldHVybiAkcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSAkcmV0dXJuPSAwOwoKICAgICAgICAgICAgICAgIHByZWdfbWF0Y2goJy9cdytcLlx3KyQvJywgJGEsICRhbSk7CiAgICAgICAgICAgICAgICBwcmVnX21hdGNoKCcvXHcrXC5cdyskLycsICRiLCAkYm0pOwoKCiAgICAgICAgICAgICAgICBpZihzdHJsZW4oJGFtWzBdKSA9PT0gc3RybGVuKCRibVswXSkpICRyZXR1cm49IDA7CiAgICAgICAgICAgICAgICAkcmV0dXJuID0gc3RybGVuKCRhbVswXSkgPCBzdHJsZW4oJGJtWzBdKSA/IDEgOiAtMTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy9lY2hvICIkYSBlICRiID0gJHJldHVybiIsICJcbiI7CiAgICAgICAgICAgIHJldHVybiAkcmV0dXJuKi0xOwogICAgICAgIH0KCgogICAgICAgIHVzb3J0KCRhcnJheSwgInNvcnRlciIpOwogICAgICAgIHJldHVybiAkYXJyYXk7CiAgICB9CgogICAgcHJpdmF0ZSBmdW5jdGlvbiBzYWZlbWtkaXIoc3RyaW5nICRwYXRoLCBib29sICRyZWN1cnNpdmUgPSB0cnVlKXsKICAgICAgICAkcGF0aCA9IGRpcm5hbWUoJHBhdGgpOwogICAgICAgIGlmKCFpc19kaXIoJHBhdGgpKXsKICAgICAgICAgICAgcmV0dXJuIG1rZGlyKCRwYXRoLCAwNzc3LCB0cnVlKTsKICAgICAgICB9CiAgICB9Cn0KCiRfRWFzeUdpdCA9IG5ldyBfRWFzeUdpdCgpOwo/Pgo=",
    "autoload.php" => "PD9waHAKcmVxdWlyZSBkaXJuYW1lKF9fRklMRV9fKS4iL0Vhc3lHaXQucGhwIjsKJGpzb24gPSBqc29uX2RlY29kZShpbXBsb2RlKGZpbGUoZGlybmFtZShfX0ZJTEVfXykuIi9tYWluLmpzb24iKSkpOwpmb3JlYWNoICgkanNvbi0+cGFja2FnZXMgYXMgJHBhY2thZ2UpICRfRWFzeUdpdC0+YXV0b2xvYWRQYWNrYWdlKCRwYWNrYWdlKTsKPz4K",
    "main.json" => "ewoKICAgICJwYWNrYWdlcyI6IFsKICAgICAgICAic2tydGRldi9UZWxlZ3JhbUJvdC1BUEkiCiAgICBdCn0K"
];

foreach ($array as $key => $value) {
    file_put_contents(dirname(__FILE__)."/".$sha."/$key", base64_decode($value));
}

file_put_contents(dirname(__FILE__)."/autoload.php", '<?php
if(count(get_included_files()) == 1) die("Direct access not permitted.");
require dirname(__FILE__)."/'.$sha.'/autoload.php";
?>');
file_put_contents(__FILE__, base64_decode('PD9waHAKZWNobyAiSW5zdGFsbGF6aW9uZSBlc2VndWl0YSEiOwp1bmxpbmsoX19GSUxFX18pOwo/Pg=='));

echo "Ricarica la pagina";
?>
